### **Unix/Linux 存储管理 & 文件系统 & Vim 总结**

---

## **📌 1. Unix/Linux 存储管理**
### **🔹 磁盘结构**
- **物理结构**：磁盘由**磁道（Track）、扇区（Sector）、柱面（Cylinder）** 组成。
- **逻辑结构**：
  - **分区（Partitions）**：磁盘划分为多个部分，每个部分可以存储不同的文件系统。
  - **文件系统（Filesystem）**：组织文件、管理存储（如 **ext4、NTFS**）。
  - **扇区（Sector）**：磁盘的最小寻址单位，通常 **512B 或 4KB**。
  - **簇（Cluster）**：多个扇区组成的存储单元，优化存储效率。
  - **块（Block）**：文件系统管理的最小存储单位（如 ext4 的默认块大小 4KB）。

### **🔹 文件分配方法**
| **方法** | **特点** | **复杂度** | **适用场景** |
|----------|---------|---------|---------|
| **连续分配（Contiguous Allocation）** | 速度快，但容易碎片化 | **O(1)** | 适用于大文件，如数据库 |
| **链接分配（Linked Allocation）** | 易扩展，但访问速度慢 | **O(n)** | 适用于日志文件 |
| **索引分配（Indexed Allocation）** | 支持随机访问，但需要索引存储 | **O(logk(n))** | 适用于操作系统文件 |
| **inode 结构** | Unix 文件系统核心，支持大文件 | **O(logk(n))** | 适用于 ext4、XFS 文件系统 |

---

## **📌 2. 文件系统（Filesystem）**
### **🔹 什么是文件系统？**
- **文件系统定义**：组织、存储和管理数据的方式。
- **Unix/Linux 支持的文件系统：**
  - **ext4**：Linux 默认文件系统，支持日志（journaling）。
  - **XFS**：适用于高吞吐量大文件存储。
  - **Btrfs**：支持快照（snapshot）、RAID。
  - **NTFS**：Windows 默认文件系统，可在 Linux 读取但写入受限。
  - **FAT32 / exFAT**：适用于 U 盘，跨平台兼容。

### **🔹 inode 结构**
- **inode 存储文件元数据**（权限、所有者、时间戳、数据块指针）。
- **不存储文件名**，文件名存储在目录项中。
- **文件访问复杂度**：
  - **顺序读取（O(n)）**：文件从头到尾读取，适用于日志文件。
  - **直接索引访问（O(1)）**：使用 inode 指针直接访问数据块。
  - **B 树索引（O(log(n))）**：用于目录查找和索引分配。

### **🔹 文件系统格式化 & 管理**
| **操作** | **命令** |
|----------|----------|
| **查看磁盘** | `lsblk`，`fdisk -l` |
| **查看文件系统** | `df -T` |
| **格式化磁盘** | `mkfs.ext4 /dev/sdX` |
| **挂载磁盘** | `mount /dev/sdX /mnt` |
| **检查 inode 信息** | `stat file.txt`，`ls -i file.txt` |

---

## **📌 3. Vim 使用指南**
### **🔹 Vim 主要模式**
| **模式** | **功能** |
|----------|---------|
| **Normal Mode（正常模式）** | 导航、删除、复制 |
| **Insert Mode（插入模式）** | 编辑文本 |
| **Visual Mode（可视模式）** | 选择文本 |
| **CLI Mode（命令行模式）** | 运行 Shell 命令、保存、退出 |

### **🔹 常用快捷键**
| **操作** | **命令** |
|----------|----------|
| **导航** | `h` 左 `j` 下 `k` 上 `l` 右 |
| **删除** | `dd` 删除整行 |
| **复制 & 粘贴** | `yy` 复制，`p` 粘贴 |
| **插入模式** | `i` 插入，`o` 新行 |
| **搜索** | `/keyword` 搜索，`n` 下一个 |
| **撤销 & 重做** | `u` 撤销，`Ctrl + r` 重做 |
| **保存 & 退出** | `:wq` 保存并退出，`:q!` 强制退出 |

---

## **📌 4. 复杂度对比**
| **存储方法** | **复杂度** | **适用场景** |
|-------------|---------|---------|
| **连续分配（Contiguous Allocation）** | **O(1)** | 适用于**顺序读取**，如数据库 |
| **链接分配（Linked Allocation）** | **O(n)** | 适用于**动态增长文件**，如日志 |
| **索引分配（Indexed Allocation）** | **O(logk(n))** | 适用于**操作系统、数据库索引** |
| **i-node 结构（i-node Structure）** | **O(logk(n))** | 适用于 **Unix 文件系统（ext4, XFS）** |

---

## **📌 5. 结论**
🔹 **Unix/Linux 存储管理** 采用 inode 结构，支持多种文件分配方式（连续、链接、索引）。  
🔹 **文件系统管理数据**，不同文件系统适用于不同场景（如 ext4 适用于 Linux，NTFS 适用于 Windows）。  
🔹 **Vim 是强大的文本编辑器**，提供多种模式，适用于高效编码和文件编辑。  
🔹 **掌握相关命令和快捷键** 可以提高存储管理和文本处理效率。  

